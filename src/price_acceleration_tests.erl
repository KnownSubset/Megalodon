-module(price_acceleration_tests).
-export ([test/0]).

test() ->
    eunit:test ({
        setup,
        fun () -> io:format ("~n** price_acceleration_tests **~n~n", []) end,
        [fun price_accerlation_test/0]}).

price_accerlation_test() ->
    Closings = [12156.81,11740.15,11893.69,12040.39,12254.99,12213.80,12258.90,12266.39,12582.18,12694.28,12684.92,12570.22,
                12381.02,12284.30,12427.26,12337.22,12348.21,12376.98,12552.24,12373.41,12240.01,12182.13,12247.00,12200.10,
                 12265.13,12635.16,12743.19,12650.36,12442.83,12480.30,12383.89,12207.17,12378.61,12270.17,11971.19,12099.30,
                 12159.21,12466.16,12501.11,12778.15,12606.30,12853.09,12735.31,12589.07,12827.49,12800.18,13056.72,13043.96],
    Accelerations_2 = [ -208.32999999999993,    76.77000000000044,    73.34999999999945,      107.30000000000018,
                        -20.595000000000255,    22.550000000000182,   3.744999999999891,      157.89500000000044,
                        56.05000000000018,      -4.680000000000291,   -57.350000000000364,    -94.59999999999945,
                        -48.36000000000058,     71.48000000000047,    -45.02000000000044,     5.494999999999891,
                        14.385000000000218,     87.63000000000011,    -89.41499999999996,     -66.69999999999982,
                        -28.94000000000051,     32.4350000000004,     -23.449999999999818,    32.51499999999942,
                        185.01500000000033,     54.01500000000033,    -46.414999999999964,    -103.76500000000033,
                        18.734999999999673,     -48.20499999999993,   -88.35999999999967,     85.72000000000025,
                        -54.220000000000255,    -149.48999999999978,  64.05499999999938,      29.954999999999927,
                        153.47500000000036,     17.475000000000364,   138.51999999999953,     -85.92500000000018,
                        123.39500000000044,     -58.89000000000033,   -73.11999999999989,     119.21000000000004,
                        -13.654999999999745,    128.26999999999953],
    Accelerations_3 = [ -87.70666666666632,     100.07999999999993, 120.4333333333331,      57.803333333333285,
                        1.3033333333332848,     17.530000000000047, 107.76000000000022,     142.63000000000042,
                        34.24666666666659,      -41.35333333333377, -101.29999999999988,    -95.30666666666669,
                        15.413333333333261,     17.640000000000025, -26.350000000000364,    13.253333333333407,
                        68.01000000000022,      -1.189999999999903, -104.07666666666653,    -63.76000000000022,
                        2.3299999999999272,     5.990000000000388,  6.0433333333330665,     145.01999999999984,
                        159.35333333333378,     5.066666666666909,  -100.12000000000019,    -56.6866666666671,
                        -19.646666666666835,    -91.04333333333307, -1.7599999999996119,    21.0,
                        -135.8066666666667,     -56.95666666666693, 62.67333333333287,      122.28666666666686,
                        113.96666666666715,     103.9966666666666,  35.0633333333329,       24.98000000000017,
                        43.00333333333341,      -88.00666666666682, 30.726666666666762,     70.37000000000019,
                        76.40999999999985],
    Accelerations_4 = [ -29.105000000000018,    128.71000000000004,     80.02749999999969,      54.627500000000055,
                        2.849999999999909,      92.09500000000025,      108.84500000000025,     104.63250000000016,
                        -2.9900000000002365,    -78.31500000000005,     -100.1550000000002,     -35.73999999999978,
                        -10.950000000000273,    15.977499999999964,     -12.570000000000164,    53.75500000000011,
                        6.300000000000182,      -34.242499999999836,    -92.52750000000015,     -31.602499999999964,
                        -9.977499999999964,     20.75,                  97.03999999999996,      135.77250000000004,
                        96.30750000000035,      -48.08249999999998,     -65.72250000000031,     -66.61750000000029,
                        -58.914999999999964,    -25.422499999999673,    -28.429999999999836,    -58.99499999999989,
                        -69.82750000000033,     -27.740000000000236,    123.74249999999984,     100.45250000000033,
                        154.73500000000013,     35.034999999999854,     87.99499999999989,      -10.710000000000036,
                        -4.307499999999891,     -6.400000000000091,     16.2175000000002,       116.91249999999991],
    compare_lists(Accelerations_2, price_acceleration:calculate(Closings, 2)),
    compare_lists(Accelerations_3, price_acceleration:calculate(Closings, 3)),
    compare_lists(Accelerations_4, price_acceleration:calculate(Closings, 4)).

print_lists([]) ->
    [];
print_lists([H|T]) ->
    io:format ("~n~p,", [H]),
    print_lists(T).

compare_lists([], []) ->
    [];
compare_lists([H1 | T1], [H2|T2])->
    H1 = H2,
    print_lists([H1]),
    compare_lists(T1, T2).
